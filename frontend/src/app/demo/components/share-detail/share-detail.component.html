<div *ngIf="!loading">
  <!-- âœ… RÃ©sumÃ© -->
  <div *ngIf="type === 'resume'" class="resume-card">
    <h2 class="title">ğŸ“– RÃ©sumÃ© partagÃ©</h2>

    <markdown *ngIf="content" class="markdown-body" [data]="content"></markdown>

    <div class="actions" *ngIf="content">
      <p-button icon="pi pi-copy" label="Copier" (onClick)="copy()"></p-button>
      <p-button class="p-button-secondary" icon="pi pi-download" label="TÃ©lÃ©charger .md"
                (onClick)="download()"></p-button>
    </div>
  </div>

  <!-- âœ… Quiz -->
  <div *ngIf="type === 'quiz'" class="card p-6 shadow-md rounded-xl bg-white">
    <h3 class="text-xl font-bold mb-4">ğŸ“ {{ quiz?.title || 'Quiz partagÃ©' }}</h3>

    <ng-container *ngIf="quiz?.questions?.length; else noQuiz">
      <form (ngSubmit)="submitQuiz()">
        <div *ngFor="let q of quiz.questions; let qi = index" class="mb-5">
          <p class="font-medium mb-2">
            <span class="text-indigo-600">Q{{ qi + 1 }}.</span>
            {{ q.text || q.question }}
          </p>

          <div class="pl-2 space-y-2">
            <label class="flex items-center gap-2"
                   *ngFor="let opt of (q.options || q.answers); let oi = index">
              <input
                [type]="isMultiple(q) ? 'checkbox' : 'radio'"
                [name]="'q' + qi"
                [checked]="isSelected(qi, oi)"
                (change)="toggleSelect(qi, oi, isMultiple(q))">
              <span>{{ displayOption(opt) }}</span>
            </label>
          </div>
        </div>

        <button pButton type="submit" label="Soumettre" class="p-button-success"></button>
      </form>

      <div *ngIf="quizResult" class="mt-4 p-3 bg-green-50 border border-green-200 rounded">
        <p class="font-medium">
          âœ… Score : {{ quizResult.score }} / {{ quizResult.total }}
          <span class="ml-2 text-sm text-gray-600">({{ quizResult.correct }} bonnes rÃ©ponses)</span>
        </p>
      </div>
    </ng-container>

    <ng-template #noQuiz>
      <div class="text-gray-500 italic">âŒ Ce partage ne contient pas de questions.</div>
    </ng-template>
  </div>

  <!-- âŒ Si rien trouvÃ© -->
  <div *ngIf="!type" class="text-red-500 font-semibold">âŒ Contenu introuvable</div>
</div>

<!-- Loader -->
<p *ngIf="loading" class="muted">Chargement du contenuâ€¦</p>
